import"./modulepreload-polyfill-B5Qt9EMX.js";const u="https://www.relda.com.br",p=document.getElementById("login-form"),f=document.getElementById("email"),a=document.getElementById("password"),h=document.getElementById("toggle-password"),i=document.getElementById("login-button"),r=document.getElementById("button-text"),c=document.getElementById("button-loading"),l=document.getElementById("error-message"),w=document.getElementById("error-text"),E=document.getElementById("signup-link"),v=document.getElementById("forgot-password-link"),g=document.getElementById("forgot-password-modal"),b=document.getElementById("reset-password-form"),I=document.getElementById("reset-email"),L=document.getElementById("close-modal"),B=document.getElementById("cancel-reset");function m(e){w.textContent=e,l.classList.remove("hidden"),setTimeout(()=>{l.classList.add("hidden")},5e3)}function x(e){const t=document.createElement("div");t.className="fixed top-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg",t.style.transition="opacity 0.5s, transform 0.5s",t.style.transform="translateX(100%)",t.style.opacity="0",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.style.transform="translateX(0)",t.style.opacity="1"},100),setTimeout(()=>{t.remove()},4e3)}h.addEventListener("click",function(){const e=a.getAttribute("type")==="password"?"text":"password";a.setAttribute("type",e),this.querySelector("svg").classList.toggle("text-gray-700")});p.addEventListener("submit",function(e){e.preventDefault();const t=f.value.trim(),n=a.value;if(!t||!n){m("Por favor, preencha o e-mail e a senha.");return}r.classList.add("hidden"),c.classList.remove("hidden"),i.disabled=!0;const o={email:t,password:n};fetch(`${u}/api/accounts/token/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),credentials:"include"}).then(async s=>{if(!s.ok){const y=await s.json().catch(()=>({}));throw new Error(y.detail||"Credenciais inválidas.")}window.location.href="/index.html"}).catch(s=>{m(s.message)}).finally(()=>{r.classList.remove("hidden"),c.classList.add("hidden"),i.disabled=!1})});function d(){g.classList.add("hidden")}v.addEventListener("click",function(e){e.preventDefault(),g.classList.remove("hidden")});L.addEventListener("click",d);B.addEventListener("click",d);b.addEventListener("submit",function(e){e.preventDefault();const t=I.value.trim(),n=this.querySelector('button[type="submit"]');if(!t){alert("Por favor, digite seu e-mail.");return}n.disabled=!0,n.textContent="Enviando...",fetch(`${u}/api/accounts/password_reset/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}).then(async o=>{if(!o.ok)throw new Error("Não foi possível encontrar um usuário com este e-mail.");return o.json()}).then(o=>{d(),x("E-mail de redefinição enviado! Verifique o console do Django.")}).catch(o=>{alert(o.message)}).finally(()=>{n.disabled=!1,n.textContent="Enviar"})});E.addEventListener("click",function(e){e.preventDefault(),window.location.href="cadastros/admin/cadastroAdmin.html"});
